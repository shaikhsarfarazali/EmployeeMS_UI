<div *ngIf="isLoading" class="loader-overlay">
    <div class="loader"></div>
</div>
<button class="add-button" (click)="goBack()">back</button>

<form [formGroup]="form" (ngSubmit)="submitForm()" class="employee-form">
    <h2 class="form-title">{{ isEditMode ? 'Edit' : 'Add' }} Employee</h2>
    <div class="form-group">
        <label for="user">Select User</label>
        <select formControlName="userId">
            <option *ngFor="let user of users" [value]="user.id">
                {{ user.fullName || user.email }}
            </option>
        </select>
    </div>
    <div class="form-group">
        <label for="department">Department</label>
        <input type="text" id="department" formControlName="department" class="form-control" />
        <div class="error-message" *ngIf="department?.touched && department?.invalid">
            <small *ngIf="department?.errors?.['required']">Department is required.</small>
            <small *ngIf="department?.errors?.['minlength']">Min 3 characters required.</small>
        </div>
    </div>

    <div class="form-group">
        <label for="salary">Salary</label>
        <input type="number" id="salary" formControlName="salary" class="form-control" />
        <div class="error-message" *ngIf="salary?.touched && salary?.invalid">
            <small *ngIf="salary?.errors?.['required']">Salary is required.</small>
            <small *ngIf="salary?.errors?.['min']">Salary must be greater than 0.</small>
        </div>
    </div>

    <div class="form-group">
        <label for="dateOfJoining">Date of Joining</label>
        <input type="date" id="dateOfJoining" formControlName="dateOfJoining" class="form-control" />
        <div class="error-message" *ngIf="dateOfJoining?.touched && dateOfJoining?.invalid">
            <small>Date of Joining is required.</small>
        </div>
    </div>

    <button type="submit" class="submit-button">
        {{ isEditMode ? 'Update' : 'Create' }}
    </button>
</form>